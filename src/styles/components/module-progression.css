/* Module Progression View - Learning Path Visualization */

.module-progression-overlay {
  @apply fixed inset-0 flex items-center justify-center p-4;
  background-color: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(6px);
  z-index: 60;
}

.module-progression-container {
  @apply bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full border border-gray-200 dark:border-gray-700;
  @apply flex flex-col;
  /* Altura fija para evitar conflictos */
  height: 90vh;
  max-height: 90vh;
  /* Responsive width: más ancho en desktop para aprovechar las 2 columnas */
  max-width: 90vw;
}

@media (min-width: 768px) {
  .module-progression-container {
    max-width: 80vw;
    height: 85vh;
    max-height: 85vh;
  }
}

@media (min-width: 1024px) {
  .module-progression-container {
    max-width: 85vw;
    min-width: 900px;
    height: 80vh;
    max-height: 80vh;
  }
}

@media (min-width: 1400px) {
  .module-progression-container {
    max-width: 1200px;
  }
}

.module-progression-header {
  @apply flex items-start justify-between p-6 border-b border-gray-200 dark:border-gray-700;
  @apply bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-gray-700;
  @apply flex-shrink-0;
  /* Altura fija para el header */
}

.module-progression-title {
  @apply text-2xl font-bold text-gray-900 dark:text-white;
}

.module-progression-subtitle {
  @apply text-sm text-gray-600 dark:text-gray-400 mt-1;
}

.module-progression-close {
  @apply p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-lg;
  @apply hover:bg-white dark:hover:bg-gray-800 transition-all duration-200;
  @apply focus:outline-none focus:ring-2 focus:ring-indigo-500;
}

.module-progression-content {
  @apply p-4 overflow-y-auto flex-1 space-y-3;
  /* Padding bottom moderado para scroll suave */
  padding-bottom: 1rem;
  /* Asegurar que el scroll funcione correctamente */
  min-height: 0;
}

/* Compact Header */
.progression-header-compact {
  @apply bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-700;
  @apply rounded-lg p-3 border border-blue-200 dark:border-gray-600;
  @apply flex items-center justify-between gap-4;
}

.progression-stats-compact {
  @apply flex items-center gap-4;
}

.progression-stat-compact {
  @apply flex items-center gap-1;
}

.progression-stat-value-compact {
  @apply text-lg font-bold text-gray-900 dark:text-white;
}

.progression-bar-compact {
  @apply flex items-center gap-2 flex-1;
}

.progression-bar-track-compact {
  @apply flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2;
}

.progression-bar-fill-compact {
  @apply bg-gradient-to-r from-blue-500 to-indigo-500 h-2 rounded-full transition-all duration-700;
}

.progression-bar-text-compact {
  @apply text-sm font-bold text-gray-700 dark:text-gray-300;
}

/* Next Recommendation - Compact */
.next-recommendation-compact {
  @apply flex items-center gap-2 bg-green-50 dark:bg-green-900/20 px-3 py-1 rounded-lg;
  @apply border border-green-200 dark:border-green-800;
}

.next-recommendation-text {
  @apply text-sm text-green-700 dark:text-green-300;
}

/* Units Progression - Responsive Grid */
.units-progression {
  @apply grid gap-3;
  /* Mobile: 1 columna */
  grid-template-columns: 1fr;
}

/* Desktop: 2 columnas para mejor uso del espacio */
@media (min-width: 1024px) {
  .units-progression {
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
}

/* Pantallas muy anchas: mantener 2 columnas pero con max-width */
@media (min-width: 1400px) {
  .units-progression {
    max-width: 1200px;
    margin: 0 auto;
  }
}

.unit-section {
  @apply bg-white dark:bg-gray-800 rounded-xl border-2 shadow-sm;
  @apply transition-all duration-200 hover:shadow-md;
  /* Asegurar altura consistente en el grid */
  @apply flex flex-col;
  min-height: fit-content;
}

/* En desktop, asegurar que las unidades tengan altura similar */
@media (min-width: 1024px) {
  .unit-section {
    min-height: 200px;
  }
}

.unit-section--emerald {
  @apply border-emerald-200 dark:border-emerald-800;
}
.unit-section--blue {
  @apply border-blue-200 dark:border-blue-800;
}
.unit-section--purple {
  @apply border-purple-200 dark:border-purple-800;
}
.unit-section--orange {
  @apply border-orange-200 dark:border-orange-800;
}
.unit-section--red {
  @apply border-red-200 dark:border-red-800;
}
.unit-section--indigo {
  @apply border-indigo-200 dark:border-indigo-800;
}

.unit-header {
  @apply flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700;
}

.unit-info {
  @apply flex items-center gap-4;
}

.unit-badge {
  @apply flex-shrink-0;
}

.unit-code {
  @apply inline-flex items-center justify-center w-10 h-10 rounded-full font-bold text-white text-base;
}

.unit-section--emerald .unit-code {
  @apply bg-emerald-500;
}
.unit-section--blue .unit-code {
  @apply bg-blue-500;
}
.unit-section--purple .unit-code {
  @apply bg-purple-500;
}
.unit-section--orange .unit-code {
  @apply bg-orange-500;
}
.unit-section--red .unit-code {
  @apply bg-red-500;
}
.unit-section--indigo .unit-code {
  @apply bg-indigo-500;
}

.unit-details {
  @apply flex-1;
}

.unit-name {
  @apply text-base font-semibold text-gray-900 dark:text-white;
}

.unit-description {
  @apply text-xs text-gray-600 dark:text-gray-400;
}

.unit-progress {
  @apply flex flex-col items-end gap-2;
}

.unit-progress-text {
  @apply text-sm font-bold text-gray-700 dark:text-gray-300;
}

.unit-progress-bar {
  @apply w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-2;
}

.unit-progress-fill {
  @apply h-2 rounded-full transition-all duration-500;
}

.unit-section--emerald .unit-progress-fill {
  @apply bg-emerald-500;
}
.unit-section--blue .unit-progress-fill {
  @apply bg-blue-500;
}
.unit-section--purple .unit-progress-fill {
  @apply bg-purple-500;
}
.unit-section--orange .unit-progress-fill {
  @apply bg-orange-500;
}
.unit-section--red .unit-progress-fill {
  @apply bg-red-500;
}
.unit-section--indigo .unit-progress-fill {
  @apply bg-indigo-500;
}

/* Compact Module Groups */
.module-groups-compact {
  @apply p-2 space-y-2 flex-1;
  /* Asegurar que el contenido se distribuya bien en el grid */
}

.module-group-compact {
  @apply rounded-lg p-2;
}

.module-group-compact--available {
  @apply bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800;
}

.module-group-compact--completed {
  @apply bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800;
}

.module-group-compact--locked {
  @apply bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700;
}

.module-group-header-compact {
  @apply flex items-center gap-2 mb-1;
}

.module-group-title-compact {
  @apply text-xs font-medium text-gray-700 dark:text-gray-300;
}

.module-list-compact {
  @apply space-y-1;
}

.module-item-compact {
  @apply flex items-center justify-between p-2 rounded bg-white dark:bg-gray-800;
  @apply border border-gray-200 dark:border-gray-700;
}

.module-item-compact--available {
  @apply hover:bg-blue-50 dark:hover:bg-blue-900/10 cursor-pointer;
}

.module-item-name-compact {
  @apply font-medium text-gray-900 dark:text-white text-xs;
}

.module-item-type-compact {
  @apply text-xs text-gray-500 dark:text-gray-400 capitalize;
}

.module-item-more-compact {
  @apply text-xs text-gray-500 dark:text-gray-400 text-center p-1;
}

/* Responsive Design - Mobile First */
@media (max-width: 768px) {
  .module-progression-container {
    @apply mx-2;
    max-width: 95vw;
    height: 92vh;
    max-height: 92vh;
  }

  .module-progression-header {
    @apply p-3;
  }

  .module-progression-title {
    @apply text-xl;
  }

  .module-progression-content {
    @apply p-3;
    padding-bottom: 1rem;
  }

  .units-progression {
    @apply space-y-2;
    /* Forzar 1 columna en móvil */
    grid-template-columns: 1fr !important;
  }

  .progression-header-compact {
    @apply flex-col items-stretch gap-2;
  }

  .progression-stats-compact {
    @apply justify-center gap-6;
  }

  .unit-header {
    @apply flex-col items-start gap-2;
  }

  .unit-info {
    @apply w-full;
  }

  .unit-progress {
    @apply flex-row items-center gap-2 w-full;
  }

  .unit-progress-bar {
    @apply flex-1;
  }

  .unit-section {
    min-height: auto;
  }
}

@media (max-width: 480px) {
  .module-progression-container {
    @apply mx-1;
    max-width: 98vw;
    height: 95vh;
    max-height: 95vh;
  }

  .module-progression-header {
    @apply p-2;
  }

  .module-progression-content {
    @apply p-2;
    padding-bottom: 0.5rem;
  }

  .progression-stats-compact {
    @apply gap-4;
  }

  .unit-code {
    @apply w-8 h-8 text-sm;
  }

  .unit-info {
    @apply gap-2;
  }

  .module-groups-compact {
    @apply p-1 space-y-1;
  }

  .module-group-compact {
    @apply p-1;
  }
}
