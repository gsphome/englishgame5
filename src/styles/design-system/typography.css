/**
 * FluentFlow Typography System - Homologated Design
 * 
 * AI_CONTEXT: Unified typography system for consistent visual hierarchy
 * AI_VALIDATION: TYPOGRAPHY_SYSTEM - Complete typographic design tokens
 * AI_USAGE: Use typography classes instead of custom font-size declarations
 * 
 * Solves critical inconsistencies identified in typography audit:
 * - Module cards with illegible text (0.4375rem)
 * - Inconsistent header sizes across components
 * - Lack of visual hierarchy
 * - Poor responsive scaling
 */

/* === TYPOGRAPHY DESIGN TOKENS === */
:root {
  /* === FONT FAMILIES === */
  /* AI_VALIDATION: FONT_FAMILIES - Consistent font stack across application */
  --font-primary: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono:
    ui-monospace, SFMono-Regular, 'SF Mono', Consolas, 'Liberation Mono', Menlo, monospace;

  /* === FONT SIZES - MODULAR SCALE === */
  /* AI_VALIDATION: FONT_SCALE - Harmonious scale based on 1rem base */
  /* AI_CONTEXT: Minimum 12px (0.75rem) for accessibility compliance */
  --text-xs: 0.75rem;
  /* 12px - Minimum legible size */
  --text-sm: 0.875rem;
  /* 14px - Small text, labels */
  --text-base: 1rem;
  /* 16px - Body text baseline */
  --text-lg: 1.125rem;
  /* 18px - Emphasized text */
  --text-xl: 1.25rem;
  /* 20px - Small headings */
  --text-2xl: 1.5rem;
  /* 24px - Medium headings */

  /* === SHADOW SYSTEM - UNIFIED DESIGN === */
  /* AI_VALIDATION: SHADOW_SYSTEM - Consistent elevation across components */
  /* AI_CONTEXT: Apple-inspired shadow system for visual hierarchy */
  --shadow-subtle: 0 1px 3px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.02);
  --shadow-medium: 0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-strong: 0 4px 16px rgba(0, 0, 0, 0.15);
  --shadow-interactive: 0 2px 4px rgba(0, 0, 0, 0.1);

  /* === BORDER RADIUS SYSTEM === */
  /* AI_VALIDATION: RADIUS_SYSTEM - Consistent corner radius across components */
  --radius-sm: 0.25rem;
  /* 4px - Small elements */
  --radius-md: 0.5rem;
  /* 8px - Medium elements */
  --radius-lg: 1rem;
  /* 16px - Large containers */
  --radius-xl: 1.25rem;
  /* 20px - Extra large containers */

  /* === PADDING SYSTEM === */
  /* AI_VALIDATION: PADDING_SYSTEM - Consistent spacing across components */
  --padding-xs: 0.25rem;
  /* 4px - Extra small padding */
  --padding-sm: 0.375rem;
  /* 6px - Small padding */
  --padding-md: 0.5rem;
  /* 8px - Medium padding */
  --padding-lg: 0.75rem;
  /* 12px - Large padding */
  --padding-xl: 1rem;
  /* 16px - Extra large padding */

  --text-3xl: 1.875rem;
  /* 30px - Large headings */
  --text-4xl: 2.25rem;
  /* 36px - Hero text */

  /* === FONT WEIGHTS === */
  /* AI_VALIDATION: FONT_WEIGHTS - Semantic weight system */
  --font-light: 300;
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;
  --font-extrabold: 800;

  /* === LINE HEIGHTS === */
  /* AI_VALIDATION: LINE_HEIGHTS - Optimized for readability */
  --leading-none: 1;
  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;
  --leading-loose: 2;

  /* === LETTER SPACING === */
  /* AI_VALIDATION: LETTER_SPACING - Subtle tracking adjustments */
  --tracking-tighter: -0.05em;
  --tracking-tight: -0.025em;
  --tracking-normal: 0em;
  --tracking-wide: 0.025em;
  --tracking-wider: 0.05em;
  --tracking-widest: 0.1em;
}

/* === RESPONSIVE TYPOGRAPHY SCALING === */
/* AI_VALIDATION: RESPONSIVE_TYPOGRAPHY - Mobile-first scaling */
/* AI_CONTEXT: Larger base sizes on mobile for better legibility */

/* Mobile: Larger base sizes for touch interfaces */
@media (max-width: 640px) {
  :root {
    --text-xs: 0.875rem;
    /* 14px - Larger minimum on mobile */
    --text-sm: 1rem;
    /* 16px - Prevents iOS zoom */
    --text-base: 1.125rem;
    /* 18px - Comfortable reading */
    --text-lg: 1.25rem;
    /* 20px */
    --text-xl: 1.375rem;
    /* 22px */
    --text-2xl: 1.625rem;
    /* 26px */
    --text-3xl: 2rem;
    /* 32px */
  }
}

/* Tablet: Balanced scaling */
@media (min-width: 641px) and (max-width: 1024px) {
  :root {
    --text-xs: 0.8125rem;
    /* 13px */
    --text-sm: 0.9375rem;
    /* 15px */
    --text-base: 1.0625rem;
    /* 17px */
  }
}

/* === TYPOGRAPHY UTILITY CLASSES === */
/* AI_VALIDATION: TYPOGRAPHY_UTILITIES - Semantic typography classes */
/* AI_USAGE: Apply these classes instead of custom font-size declarations */

/* === HEADINGS === */
.typography-h1 {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-3xl, 1.875rem);
  font-weight: var(--font-bold, 700);
  line-height: var(--leading-tight, 1.25);
  letter-spacing: var(--tracking-tight, -0.025em);
  color: var(--theme-text-primary, #111827);
}

.typography-h2 {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-2xl, 1.5rem);
  font-weight: var(--font-semibold, 600);
  line-height: var(--leading-tight, 1.25);
  letter-spacing: var(--tracking-tight, -0.025em);
  color: var(--theme-text-primary, #111827);
}

.typography-h3 {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-xl, 1.25rem);
  font-weight: var(--font-semibold, 600);
  line-height: var(--leading-snug, 1.375);
  color: var(--theme-text-primary, #111827);
}

.typography-h4 {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-lg, 1.125rem);
  font-weight: var(--font-semibold, 600);
  line-height: var(--leading-snug, 1.375);
  color: var(--theme-text-primary, #111827);
}

/* === BODY TEXT === */
.typography-body {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-base, 1rem);
  font-weight: var(--font-normal, 400);
  line-height: var(--leading-normal, 1.5);
  color: var(--theme-text-primary, #111827);
}

.typography-body-lg {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-lg, 1.125rem);
  font-weight: var(--font-normal, 400);
  line-height: var(--leading-normal, 1.5);
  color: var(--theme-text-primary, #111827);
}

.typography-body-sm {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-sm, 0.875rem);
  font-weight: var(--font-normal, 400);
  line-height: var(--leading-normal, 1.5);
  color: var(--theme-text-primary, #111827);
}

/* === LABELS AND METADATA === */
.typography-label {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-sm, 0.875rem);
  font-weight: var(--font-medium, 500);
  line-height: var(--leading-snug, 1.375);
  color: var(--theme-text-primary, #111827);
}

.typography-label-lg {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-base, 1rem);
  font-weight: var(--font-medium, 500);
  line-height: var(--leading-snug, 1.375);
  color: var(--theme-text-primary, #111827);
}

.typography-caption {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-xs, 0.75rem);
  font-weight: var(--font-normal, 400);
  line-height: var(--leading-normal, 1.5);
  color: var(--theme-text-secondary, #6b7280);
}

.typography-overline {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-xs, 0.75rem);
  font-weight: var(--font-semibold, 600);
  line-height: var(--leading-none, 1);
  letter-spacing: var(--tracking-wider, 0.05em);
  text-transform: uppercase;
  color: var(--theme-text-tertiary, #9ca3af);
}

/* === SPECIALIZED TEXT === */
.typography-code {
  font-family: var(
    --font-mono,
    ui-monospace,
    SFMono-Regular,
    'SF Mono',
    Consolas,
    'Liberation Mono',
    Menlo,
    monospace
  );
  font-size: var(--text-sm, 0.875rem);
  font-weight: var(--font-normal, 400);
  line-height: var(--leading-snug, 1.375);
  color: var(--theme-text-primary, #111827);
  background-color: var(--theme-bg-soft, #f3f4f6);
  padding: 0.125rem 0.25rem;
  border-radius: var(--radius-sm, 0.25rem);
}

.typography-link {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: inherit;
  font-weight: var(--font-medium);
  line-height: inherit;
  color: var(--theme-primary-blue, #3b82f6);
  text-decoration: underline;
  text-decoration-color: transparent;
  transition: text-decoration-color 0.2s ease;
}

.typography-link:hover {
  text-decoration-color: currentColor;
}

/* === COMPONENT-SPECIFIC TYPOGRAPHY === */
/* AI_VALIDATION: COMPONENT_TYPOGRAPHY - Standardized component text styles */

/* === MODULE CARDS - FIXED LEGIBILITY === */
.typography-card-title {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-sm, 0.875rem);
  /* 14px - LEGIBLE (was 0.625rem/10px) */
  font-weight: var(--font-semibold, 600);
  line-height: var(--leading-tight, 1.25);
  color: var(--theme-text-on-colored, #ffffff);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.typography-card-type {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-xs, 0.75rem);
  /* 12px - MINIMUM LEGIBLE (was 0.4375rem/7px) */
  font-weight: var(--font-medium, 500);
  line-height: var(--leading-none, 1);
  letter-spacing: var(--tracking-wide, 0.025em);
  text-transform: uppercase;
  color: var(--theme-text-on-colored, rgba(255, 255, 255, 0.85));
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.typography-card-level {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-xs, 0.75rem);
  /* 12px - CONSISTENT (was 0.5rem/8px) */
  font-weight: var(--font-semibold, 600);
  line-height: var(--leading-none, 1);
  color: var(--theme-text-on-colored, rgba(255, 255, 255, 0.9));
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* === MODAL HEADERS - UNIFIED === */
.typography-modal-title {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-lg, 1.125rem);
  /* CONSISTENT ACROSS ALL MODALS */
  font-weight: var(--font-semibold, 600);
  line-height: var(--leading-tight, 1.25);
  letter-spacing: var(--tracking-tight, -0.025em);
  color: rgba(255, 255, 255, 0.95);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.typography-modal-subtitle {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-sm, 0.875rem);
  /* CONSISTENT ACROSS ALL MODALS */
  font-weight: var(--font-normal, 400);
  line-height: var(--leading-snug, 1.375);
  color: rgba(255, 255, 255, 0.85);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
}

/* === HEADER COMPONENTS - HOMOLOGATED === */
.typography-header-title {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-xl);
  /* CONSISTENT MAIN TITLE */
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
  color: var(--theme-text-primary, #374151);
}

.typography-header-username {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-sm);
  /* CONSISTENT USER INFO */
  font-weight: var(--font-medium);
  line-height: var(--leading-snug);
  color: var(--theme-text-primary, #374151);
}

.typography-header-nav {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-sm);
  /* CONSISTENT NAVIGATION */
  font-weight: var(--font-medium);
  line-height: var(--leading-snug);
  color: var(--theme-text-primary, #374151);
}

/* === FORM ELEMENTS - STANDARDIZED === */
.typography-form-label {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-sm, 0.875rem);
  /* CONSISTENT FORM LABELS */
  font-weight: var(--font-medium, 500);
  line-height: var(--leading-snug, 1.375);
  color: var(--theme-text-primary, #111827);
}

.typography-form-input {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-base, 1rem);
  /* CONSISTENT INPUT TEXT */
  font-weight: var(--font-normal, 400);
  line-height: var(--leading-normal, 1.5);
  color: var(--theme-text-primary, #111827);
}

.typography-form-help {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-xs, 0.75rem);
  /* CONSISTENT HELP TEXT */
  font-weight: var(--font-normal, 400);
  line-height: var(--leading-normal, 1.5);
  color: var(--theme-text-tertiary, #9ca3af);
}

.typography-form-error {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-sm, 0.875rem);
  /* CONSISTENT ERROR TEXT */
  font-weight: var(--font-medium, 500);
  line-height: var(--leading-snug, 1.375);
  color: var(--theme-error, #ef4444);
}

/* === LEARNING COMPONENTS - OPTIMIZED === */
.typography-flashcard-front {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-2xl);
  /* PROMINENT FRONT TEXT */
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  color: var(--theme-text-primary, #374151);
}

.typography-flashcard-back {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-xl);
  /* CLEAR BACK TEXT */
  font-weight: var(--font-semibold);
  line-height: var(--leading-snug);
  color: var(--theme-primary-blue, #3b82f6);
}

.typography-quiz-question {
  font-family: var(--font-primary, system-ui, -apple-system, sans-serif);
  font-size: var(--text-lg);
  /* READABLE QUESTIONS */
  font-weight: var(--font-semibold);
  line-height: var(--leading-snug);
  color: var(--theme-text-primary, #374151);
}

/* === ACCESSIBILITY ENHANCEMENTS === */
/* AI_VALIDATION: ACCESSIBILITY_TYPOGRAPHY - WCAG compliant text sizing */

/* High contrast mode support */
@media (prefers-contrast: high) {
  .typography-h1,
  .typography-h2,
  .typography-h3,
  .typography-h4 {
    font-weight: var(--font-bold);
  }

  .typography-label,
  .typography-form-label {
    font-weight: var(--font-semibold);
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .typography-link {
    transition: none;
  }
}

/* Large text preference */
@media (prefers-reduced-data: reduce) {
  :root {
    --text-xs: 0.875rem;
    --text-sm: 1rem;
    --text-base: 1.125rem;
    --text-lg: 1.25rem;
    --text-xl: 1.375rem;
    --text-2xl: 1.625rem;
    --text-3xl: 2rem;
  }
}

/* === PRINT STYLES === */
@media print {
  .typography-h1,
  .typography-h2,
  .typography-h3,
  .typography-h4 {
    color: #000000;
    text-shadow: none;
  }

  .typography-body,
  .typography-body-lg,
  .typography-body-sm {
    color: #000000;
    font-size: 12pt;
    line-height: 1.4;
  }

  .typography-link {
    color: #000000;
    text-decoration: underline;
  }
}

/* === DARK MODE ADJUSTMENTS === */
/* AI_VALIDATION: DARK_MODE_TYPOGRAPHY - Enhanced contrast for dark themes */
html.dark {
  /* Slightly increase font weights for better contrast on dark backgrounds */
  .typography-h1,
  .typography-h2,
  .typography-h3,
  .typography-h4 {
    font-weight: var(--font-bold);
  }

  .typography-body,
  .typography-body-lg,
  .typography-body-sm {
    font-weight: var(--font-normal);
  }

  .typography-label,
  .typography-form-label {
    font-weight: var(--font-semibold);
  }
}

/* === UTILITY MODIFIERS === */
/* AI_VALIDATION: TYPOGRAPHY_MODIFIERS - Semantic text modifications */

.typography--muted {
  color: var(--theme-text-secondary, #6b7280) !important;
}

.typography--subtle {
  color: var(--theme-text-tertiary, #9ca3af) !important;
}

.typography--emphasis {
  font-weight: var(--font-semibold) !important;
}

.typography--strong {
  font-weight: var(--font-bold) !important;
}

.typography--italic {
  font-style: italic !important;
}

.typography--uppercase {
  text-transform: uppercase !important;
  letter-spacing: var(--tracking-wide) !important;
}

.typography--center {
  text-align: center !important;
}

.typography--truncate {
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

/* === MIGRATION HELPERS === */
/* AI_VALIDATION: MIGRATION_HELPERS - Temporary classes for gradual migration */
/* AI_CONTEXT: These classes help migrate existing components gradually */

/* Deprecated - use typography-card-title instead */
.module-card__title {
  font-size: var(--text-sm) !important;
  font-weight: var(--font-semibold) !important;
  line-height: var(--leading-tight) !important;
}

/* Deprecated - use typography-card-type instead */
.module-card__type {
  font-size: var(--text-xs) !important;
  font-weight: var(--font-medium) !important;
  line-height: var(--leading-none) !important;
}

/* Deprecated - use typography-card-level instead */
.module-card__level {
  font-size: var(--text-xs) !important;
  font-weight: var(--font-semibold) !important;
  line-height: var(--leading-none) !important;
}

/* === PERFORMANCE OPTIMIZATIONS === */
/* AI_VALIDATION: TYPOGRAPHY_PERFORMANCE - Optimized font loading and rendering */

/* Font display optimization */
@font-face {
  font-family: 'system-ui';
  font-display: swap;
}

/* Text rendering optimization */
.typography-h1,
.typography-h2,
.typography-h3,
.typography-h4 {
  text-rendering: optimizeLegibility;
}

.typography-body,
.typography-body-lg,
.typography-body-sm {
  text-rendering: optimizeSpeed;
}

/* === DOCUMENTATION === */
/*
 * USAGE EXAMPLES:
 * 
 * <!-- Headers -->
 * <h1 class="typography-h1">Main Title</h1>
 * <h2 class="typography-h2">Section Title</h2>
 * 
 * <!-- Body Text -->
 * <p class="typography-body">Regular paragraph text</p>
 * <p class="typography-body-sm">Smaller body text</p>
 * 
 * <!-- Labels and Metadata -->
 * <label class="typography-label">Form Label</label>
 * <span class="typography-caption">Caption text</span>
 * 
 * <!-- Component-Specific -->
 * <div class="typography-card-title">Card Title</div>
 * <div class="typography-modal-title">Modal Title</div>
 * 
 * <!-- With Modifiers -->
 * <p class="typography-body typography--muted">Muted text</p>
 * <span class="typography-label typography--uppercase">Uppercase Label</span>
 */
